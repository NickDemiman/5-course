## Теория нормализации схем отношений

**Основная задача** - сформулировать алгоритм синтеза оптимальной схемы БД.

При разработке схемы БД изначально строится схема "Сущность - Связь". (инфологическая модель) Далее на основе этой схемы строится схема БД. Затем схема БД привязывается к конкретной СУБД.

При разработке инфологической схемы БД в основном используют 2 метода:
1) На основе знания предметной области.
2) На основе функциональных зависимостей.

В рамках этого курса/раздела будем рассматривать синтез схемы БД на основе функциональных зависимостей.


**Схема отношений** - поименованная совокупность атрибутов.
$R = (A_1, ..., A_n)$
$A_i - атрибут.$

```ad-example
$R = (имя, адрес, товар, цена\ за\ ед.\ тов.) = (A_1, A_2, A_3, A_4)$
```

**Степень схемы отношений** - количество атрибутов в этой схеме.
В случае выше - степень равна 4.


**Отношение (экземпляр отношений)** - конкретная таблица с данной схемой отношения.


Например:

|    Имя    |   Адрес   |  Товар   | Цена |
|:---------:|:---------:|:--------:|:----:|
| ООО Рубин | г Саратов | Карамель | 130  |
|   =====   |   =====   |  Сахар   |  60  |


**Универсальная схема отношений** - множество всех атрибутов этой области
Основная задача теории - синтез отношений.

```ad-example "Hi"
Пусть:

$А - универсальная\ схема\ отношений$
и $R_1, ..., R_n$ удовлетворяют следующему условию:
$\cup^n_{i=1}R_i = A$ 
$\rho = (R_1, \ldots, R_n)$
```


### Пример плохой схемы БД
$A = (A_1, A_2, A_3, A_4)$
$\rho = R$

Схема плохая, т.к. обладает следующими недостатками:
1. Избыточность. Адрес повторяется для каждого поставляемого одной фирмой товара.
2. Потенциальная противоречивость.
3. Аномалия включения записи. В примере выше, ключ - (имя, товар). Невозможность включить часть ключа без внесения другой его части.
4. Аномалия удаления. Предположим, удаляются все товары, поставляемые данным поставщиком.

Все эти проблемы возникают из-за того, что отношение не находится в 3 нормальной форме.

### Пример хорошей схемы БД
$A = (A_1, A_2, A_3, A_4)$
$R_1= (A_1, A_2)$
$R_2 = (A_1, A_3, A_4)$
$\rho = (R_1, R_2)$

Здесь не будет указанных в плохом примере проблем, т.к. $R_1$, $R_2$ находятся в 3 нормальной форме ([[3НФ (Третья нормальная форма)]]).
