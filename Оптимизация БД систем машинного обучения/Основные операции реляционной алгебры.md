# Операции реляционной алгебры

  

### 1. Объединенние двух отношений

$r = r_1 \cup r_2$ - это отношенние, кортеж которого $\in$ или $r_1$ или $r_2$

$r = \frac{A_1}{1} \frac{A_2}{2}$; $r_2 = \frac{A_1}{5} \frac{A_2}{6}$

$r = r_1 \cup r_2 = \frac{A_1}{1(3,5)} \frac{A_2}{2(4,6)}$ ; (1 и 2 не может снова появиться, без дублей)

  

### 2. Разность отношений

Это отношение, каждый кортеж которого принадлежит $r_1$, но не пренадлежит $r_2$.

$r_1$ и $r_2$ должны обладать одинаковой схемой отношений:

$r = r_1 - r_2$

$r = \frac{A_1}{3} \frac{A_2}{4}$

  

### 3. Пересечение отношения

$r = r_1 \cap r_2$ - отношение, каждый кортеж которого $\in$ и $r_1$, и $r_2$.

$r = r_1 \cap r_2 = \frac{A_1}{1} \frac{A_2}{2}$

  

### 4. Декартово произведение

Пусть R, S - некоторые схемы отношений;

r, s - соответственно экземпляры этих отношений, тогда $t = z \times s$ - декартово произведение, это есть отношение кортежа, который представляет собой конкетинацию $r..s$

$R = (A_1,A_2)$; $S=(A_1,A_3)$

$r = \frac{A_1}{1(3)} \frac{A_2}{2(4)}$; $s = \frac{A_1}{5(7)} \frac{A_3}{6(8)}$

$t = z$ x $s$ =

| $RA_1$ | $RA_2$ | $SA_1$ | $SA_2$ |
| :------: | :------: | :------: | :------: |
| 1      | 2      | 5      | 6      |
| 1      | 2      | 7      | 8      |
| 3      | 4      | 5      | 6      |
| 3      | 4      | 7      | 8      |

  

### 5. Операция селекции

$t = \sigma_F(r)$ - отношение, каждый кортеж которого $\in$ z и удовлетворяет условию F

$r = \frac{A_1}{1(9,3)} \frac{A_2}{2(8,3)}$

$t = \sigma_(A_1 <= A_2)(r) = \frac{A_1}{1(3)} \frac{A_2}{2(3)}$

  

### 6. Операция проекции

$t = \pi_(A_1...A_n)(r)$, где $A_1...A_n$ - список атрибутов

Это отношение, каждый кортеж которого состоит из значений атрибутов исходного отношения; $r =$

| $A_1$ | $A_2$ | $A_3$ | $A_4$ |
|:-----:|:-----:|:-----:|:-----:|
|   1   |   2   |   3   |   4   |
|   7   |   8   |   9   |  10   |
|   3   |   4   |   5   |   6   |
|   3   |   4   |   7   |   6   |

$\pi_(A_1,A_2)(r) = \frac{A_1}{1(7,3)} \frac{A_2}{2(8,4)}$

  

### 7. Естественное соединение

$t = r\Join s$ - следует из алгоритма его построения

1. строится декартово произведение
2. Выделяются:
$RA_(i1) = SA_(i1)$
...............................

$RA_(ik) = SA_(ik)$

Общие атрибуты схемы отношений r и s (Положение атрибутов в одинаковых позициях) можно менять столбцы местами

3. Из отношения с шага 2 удалить дублирующиеся столбцы $SA_(ik) = SA_(ik)$

#### Пример

$R = (A_1, A_2, A_3)$; $S = (A_1, A_2, A_3)$

$r = \frac{A_1}{1(4)} \frac{A_2}{2(6)} \frac{A_3}{3(7)}$

$s = \frac{A_1}{1(8)} \frac{A_2}{2(9)} \frac{A_3}{7(10)}$

1. $r \times s$ =

| $RA_1$ | $RA_2$ | $RA_3$ | $SA_1$ | $SA_2$ | $SA_4$ |

|:------:|:------:|:------:|:------:|:------:|:------:|

|   1    |   2    |   3    |   1    |   2    |   7    |

|   1    |   2    |   3    |   8    |   9    |   10   |

|   4    |   6    |   7    |   1    |   2    |   7    |

|   4    |   6    |   7    |   8    |   9    |   10   |

Находим совпадение столбцов по атрибутам - это $(RA_1, RA_2)$ и $(SA_1, SA_2)$

2. Находим совпадение параметров в строке и удаляем дубли

| $RA_1$ | $RA_2$ | $RA_3$ | $SA_1$ | $SA_2$ | $SA_4$ |

|:------:|:------:|:------:|:------:|:------:|:------:|

|  **1**   |  **2**   |   3    |  **1**   |  **2**   |   7    |

3. $A =$

| $A_1$ | $A_2$ | $A_3$ | $A_4$ |

|:-----:|:-----:|:-----:|:-----:|

|   1   |   2   |   3   |   7   |