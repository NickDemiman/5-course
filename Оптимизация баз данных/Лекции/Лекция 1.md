# Машинное обучение
1) Это формирование и чтение большого объема данных
2) Это построение статистической модели на основе этого набора
	- Статистическая модель - кластеризация, нейросеть, обучение с учителем и т.д.

Данные могут читаться либо из БД, либо из потока данных, либо из логов.

В основном мы будем рассматривать данные, хранящиеся в реляционных БД.

В курсе рассмотрим методы оптимизации запросов к БД.

## Анализ геоданных
Предположим, что задана следующая схема БД:

>Person(id, device) - человек и его устройство, на которое поступает геоинформация
>Datetime(id, t)
>GeoPoint(id, person_id, time_id, x, y) - геоточка

#### Задача
Построить кластеры скопления людей на отрезке времени [t1, t2] для планирования размещения такси.

Добавляем сущность кластера в БД:
> Cluster(id, t1, t2, x, y, r)

#### Решение
1. Считать данные в какое-либо хранилище

> SELECT (g.person_id, g.x, g.y) into M (person_id, x, y)
> FROM 
> 	GeoPoint g, 
> 	Datetime dt
> WHERE
> 	g.time_id = t.id AND
> 	dt.t BETWEEN t1 and t2

2. CL(x, y, r) = Cluster(M, Q)
3. 
> for w in CL(x, y)
> 	insert into Cluster
> 	values(ser.next_val, t1, t2, w.x, w.y, w.r)

>[T1, T2]
>SELECT t1, t2, x, y, r
>FROM Cluster C
>WHERE 
>	C.t1 <= T2 AND 
>	C.t2 >= T1


Возникают вопросы. 
1) Оптимальна ли схема БД, обладает ли она аномалиями, которые затрудняют включение и поиск, чтение данных?
2) Насколько оптимально выполняются запросы к БД?


В целом курс будет посвящен ответам на эти вопросы.

# Теория нормализации схем отношений

**Основная задача** - сформулировать алгоритм синтеза оптимальной схемы БД.

При разработке схемы БД изначально строится схема "Сущность - Связь". (инфологическая модель) Далее на основе этой схемы строится схема БД. Затем схема БД привязывается к конкретной СУБД.

При разработке инфологической схемы БД в основном используют 2 метода:
1) На основе знания предметной области.
2) На основе функциональных зависимостей.

В рамках этого курса/раздела будем рассматривать синтез схемы БД на основе функциональных зависимостей.

>**Схема отношений** - поименованная совокупность атрибутов.
$R = (A_1, ..., A_n)$
$A_i$ - атрибут.

Например:
R = (имя, адрес, товар, цена за ед. тов.) = (A1, A2, A3, A4)

Степень [[Термины#Схема отношений | схемы отношений]] - количество атрибутов в этой схеме.
В случае выше - степень равна 4.

>**Отношение (экземпляр отношений)** - конкретная таблица с данной схемой отношения.

Например:
| Имя | Адрес | Товар | Цена |
| ----- | ------- | -------| ------- |
| ООО Рубин | г Саратов | Карамель | 130 |
| -//- | -//- | Сахар | 60 |

3. **Универсальная схема отношений** - множество всех атрибутов этой области
Основная задача теории - синтез отношений.

Пусть А - универсальная схема отношений
и $R_1, ..., R_n$ удовлетворяют следующему условию:
$\cup^n_{i=1}R_i = A$ 
$\rho = (R_1, \ldots, R_n)$

### Пример плохой схемы БД
A = (A1, A2, A3, A4)
$\rho$ = R

Схема плохая, т.к. обладает следующими недостатками:
1. Избыточность. Адрес повторяется для каждого поставляемого одной фирмой товара.
2. Потенциальная противоречивость.
3. Аномалия включения записи. В примере выше, ключ - (имя, товар). Невозможность включить часть ключа без внесения другой его части.
4. Аномалия удаления. Предположим, удаляются все товары, поставляемые данным поставщиком.

Все эти проблемы возникают из-за того, что отношение не находится в 3 нормальной форме.

### Пример хорошей схемы БД
A = (A1, A2, A3, A4)
R1= (A1, A2)
R2 = (A1, A3, A4)
$\rho = (R_1, R_2)$

Здесь не будет указанных в плохом примере проблем, т.к. R1, R2 находятся в 3 нормальной форме.]

[[Лекция 2 | Следующая лекция]]

